#This isn't a bash script but I'm preserving the syntax for increased legibility
#Run the commands in kubSetup.sh

#paste the following in ~root/.bashrc

alias miniclean='minikube stop;minikube delete;service etcd stop;kubeadm reset'

#replace the proxy url
alias ministart='miniclean;swapoff -a;minikube start --kubernetes-version v1.9.0 --vm-driver=none \
--extra-config=apiserver.admission-control="NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota" \
;minikube profile agones'

#Enable RBAC resource creation
kubectl create clusterrolebinding cluster-admin-binding \
  --clusterrole=cluster-admin --serviceaccount=kube-system:default

#Install Agones
kubectl apply -f https://raw.githubusercontent.com/googlecloudplatform/agones/release-0.1/install.yaml

#your machine needs to be in root given that we aren't using a vm to launch minikube
sudo su
